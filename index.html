<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ø°ÙƒÙŠØ© ğŸªŸ Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      :root {
        --primary: #667eea;
        --secondary: #764ba2;
        --success: #10b981;
        --danger: #ef4444;
        --warning: #f59e0b;
        --dark: #1f2937;
        --light: #f9fafb;
      }

      [data-theme="dark"] {
        --bg: #111827;
        --card-bg: #1f2937;
        --text: #f9fafb;
        --border: #374151;
      }

      [data-theme="light"] {
        --bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --card-bg: #ffffff;
        --text: #1f2937;
        --border: #e5e7eb;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: var(--bg);
        color: var(--text);
        min-height: 100vh;
        transition: all 0.3s;
      }

      .container {
        max-width: 1600px;
        margin: 0 auto;
        padding: 20px;
      }

      /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
      .header {
        background: var(--card-bg);
        padding: 20px 30px;
        border-radius: 15px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 15px;
      }

      .header-left {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .header-left h1 {
        font-size: 1.8em;
        color: var(--primary);
      }

      .status-badges {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      .badge {
        padding: 6px 15px;
        border-radius: 20px;
        font-size: 0.85em;
        font-weight: bold;
      }

      .badge-online {
        background: var(--success);
        color: white;
      }
      .badge-offline {
        background: var(--danger);
        color: white;
      }
      .badge-auto {
        background: var(--primary);
        color: white;
      }
      .badge-manual {
        background: var(--warning);
        color: white;
      }

      /* Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª */
      .tabs {
        background: var(--card-bg);
        padding: 10px;
        border-radius: 15px;
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        overflow-x: auto;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      }

      .tab {
        padding: 12px 25px;
        border-radius: 10px;
        cursor: pointer;
        border: none;
        background: transparent;
        color: var(--text);
        font-size: 1em;
        font-weight: 600;
        transition: all 0.3s;
        white-space: nowrap;
      }

      .tab:hover {
        background: rgba(102, 126, 234, 0.1);
      }

      .tab.active {
        background: var(--primary);
        color: white;
      }

      /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
        animation: fadeIn 0.3s;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Ø§Ù„Ø´Ø¨ÙƒØ© */
      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 20px;
      }

      /* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© */
      .card {
        background: var(--card-bg);
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        transition: all 0.3s;
      }

      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
      }

      .card-title {
        font-size: 1.3em;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid var(--primary);
        color: var(--primary);
      }

      /* Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø³Ø§Ø³Ø§Øª */
      .sensor-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
      }

      .sensor-item {
        background: var(--light);
        padding: 20px;
        border-radius: 12px;
        text-align: center;
      }

      [data-theme="dark"] .sensor-item {
        background: #374151;
      }

      .sensor-value {
        font-size: 2.5em;
        font-weight: bold;
        color: var(--primary);
        margin: 10px 0;
      }

      .sensor-label {
        font-size: 0.9em;
        opacity: 0.7;
      }

      /* Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± */
      .slider-container {
        margin: 20px 0;
      }

      .slider-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
        font-weight: 600;
      }

      .slider {
        width: 100%;
        height: 8px;
        border-radius: 5px;
        background: #e5e7eb;
        outline: none;
        -webkit-appearance: none;
      }

      [data-theme="dark"] .slider {
        background: #4b5563;
      }

      .slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        background: var(--primary);
        cursor: pointer;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      }

      .slider::-moz-range-thumb {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        background: var(--primary);
        cursor: pointer;
        border: none;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      }

      /* Ø§Ù„Ù…Ø±Ø¦ÙŠØ§Øª */
      .visual-container {
        width: 100%;
        height: 200px;
        background: linear-gradient(to bottom, #87ceeb 0%, #e0f2fe 100%);
        border-radius: 12px;
        position: relative;
        overflow: hidden;
        border: 3px solid #333;
        margin: 20px 0;
      }

      [data-theme="dark"] .visual-container {
        background: linear-gradient(to bottom, #1e3a8a 0%, #1e40af 100%);
      }

      .window-frame {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: #8b4513;
        transition: height 0.5s ease;
      }

      .blind-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        background: repeating-linear-gradient(
          0deg,
          #d4a574,
          #d4a574 10px,
          #c9995d 10px,
          #c9995d 20px
        );
        transition: height 0.5s ease;
      }

      /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
      .btn {
        padding: 12px 25px;
        border-radius: 10px;
        border: none;
        cursor: pointer;
        font-size: 1em;
        font-weight: 600;
        transition: all 0.3s;
        width: 100%;
        margin-top: 10px;
      }

      .btn-primary {
        background: var(--primary);
        color: white;
      }

      .btn-primary:hover {
        background: #5568d3;
        transform: scale(1.02);
      }

      .btn-secondary {
        background: #6b7280;
        color: white;
      }

      .btn-success {
        background: var(--success);
        color: white;
      }

      .btn-danger {
        background: var(--danger);
        color: white;
      }

      /* Ø§Ù„Ù…ÙØ§ØªÙŠØ­ */
      .switch-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px;
        background: var(--light);
        border-radius: 10px;
        margin: 10px 0;
      }

      [data-theme="dark"] .switch-container {
        background: #374151;
      }

      .switch {
        position: relative;
        display: inline-block;
        width: 55px;
        height: 30px;
      }

      .switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }

      .switch-slider {
        position: absolute;
        cursor: pointer;
        inset: 0;
        background-color: #ccc;
        transition: 0.4s;
        border-radius: 30px;
      }

      .switch-slider:before {
        position: absolute;
        content: "";
        height: 22px;
        width: 22px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        transition: 0.4s;
        border-radius: 50%;
      }

      input:checked + .switch-slider {
        background-color: var(--primary);
      }

      input:checked + .switch-slider:before {
        transform: translateX(25px);
      }

      /* Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª */
      .scene-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
      }

      .scene-btn {
        padding: 20px;
        border-radius: 12px;
        border: 2px solid var(--border);
        background: var(--card-bg);
        cursor: pointer;
        text-align: center;
        transition: all 0.3s;
      }

      .scene-btn:hover {
        border-color: var(--primary);
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
      }

      .scene-icon {
        font-size: 2em;
        margin-bottom: 10px;
      }

      /* Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø© */
      .schedule-item {
        background: var(--light);
        padding: 15px;
        border-radius: 10px;
        margin: 10px 0;
        display: grid;
        grid-template-columns: 40px 1fr 80px 80px auto;
        gap: 15px;
        align-items: center;
      }

      [data-theme="dark"] .schedule-item {
        background: #374151;
      }

      .schedule-input {
        padding: 8px;
        border-radius: 6px;
        border: 2px solid var(--border);
        background: var(--card-bg);
        color: var(--text);
      }

      /* Ø§Ù„Ø³Ø¬Ù„ */
      .log-container {
        max-height: 400px;
        overflow-y: auto;
        background: var(--light);
        padding: 15px;
        border-radius: 10px;
      }

      [data-theme="dark"] .log-container {
        background: #374151;
      }

      .log-entry {
        padding: 10px;
        border-left: 3px solid var(--primary);
        margin: 8px 0;
        background: white;
        border-radius: 6px;
        font-size: 0.9em;
      }

      [data-theme="dark"] .log-entry {
        background: #1f2937;
      }

      .log-entry.warning {
        border-left-color: var(--warning);
      }

      .log-entry.error {
        border-left-color: var(--danger);
      }

      /* Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© */
      .chart-container {
        position: relative;
        height: 300px;
        margin: 20px 0;
      }

      /* Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */
      .stat-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
      }

      .stat-card {
        background: var(--light);
        padding: 20px;
        border-radius: 12px;
        text-align: center;
      }

      [data-theme="dark"] .stat-card {
        background: #374151;
      }

      .stat-value {
        font-size: 2em;
        font-weight: bold;
        color: var(--primary);
        margin: 10px 0;
      }

      /* Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
      .input-group {
        margin: 15px 0;
      }

      .input-label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
      }

      .input-field {
        width: 100%;
        padding: 12px;
        border-radius: 8px;
        border: 2px solid var(--border);
        background: var(--card-bg);
        color: var(--text);
        font-size: 1em;
      }

      .input-field:focus {
        outline: none;
        border-color: var(--primary);
      }

      /* Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª */
      .alert {
        padding: 15px 20px;
        border-radius: 10px;
        margin: 15px 0;
        display: none;
      }

      .alert.show {
        display: block;
        animation: slideDown 0.3s;
      }

      @keyframes slideDown {
        from {
          transform: translateY(-20px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      .alert-danger {
        background: #fee2e2;
        color: #991b1b;
        border-left: 4px solid var(--danger);
      }

      /* Ø²Ø± Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
      .theme-toggle {
        background: var(--card-bg);
        border: 2px solid var(--border);
        padding: 10px 20px;
        border-radius: 10px;
        cursor: pointer;
        font-size: 1.2em;
        transition: all 0.3s;
      }

      .theme-toggle:hover {
        transform: scale(1.1);
      }

      /* ØªØ­Ù…ÙŠÙ„ */
      .loading {
        animation: pulse 1.5s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„ÙØ±ÙŠÙ‚ */
      .team-member {
        background: var(--light);
        padding: 25px;
        border-radius: 15px;
        text-align: center;
        transition: all 0.3s;
      }

      [data-theme="dark"] .team-member {
        background: #374151;
      }

      .team-member:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
      }

      .member-avatar {
        font-size: 4em;
        margin-bottom: 15px;
      }

      .team-member h4 {
        color: var(--primary);
        font-size: 1.3em;
        margin-bottom: 5px;
      }

      .member-role {
        color: var(--warning);
        font-weight: 600;
        margin-bottom: 15px;
        font-size: 0.95em;
      }

      .member-info {
        text-align: right;
        margin: 20px 0;
        font-size: 0.9em;
        line-height: 1.8;
      }

      .social-links {
        display: flex;
        gap: 10px;
        justify-content: center;
        margin-top: 15px;
      }

      .social-btn {
        padding: 8px 20px;
        background: var(--primary);
        color: white;
        border-radius: 20px;
        text-decoration: none;
        font-size: 0.85em;
        transition: all 0.3s;
      }

      .social-btn:hover {
        background: var(--secondary);
        transform: scale(1.05);
      }

      /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ† */
      .supervisor-card {
        background: var(--light);
        padding: 25px;
        border-radius: 15px;
        border: 2px solid var(--primary);
      }

      [data-theme="dark"] .supervisor-card {
        background: #374151;
      }

      .supervisor-avatar {
        font-size: 3.5em;
        text-align: center;
        margin-bottom: 15px;
      }

      .supervisor-card h4 {
        color: var(--primary);
        font-size: 1.4em;
        text-align: center;
        margin-bottom: 5px;
      }

      .supervisor-title {
        text-align: center;
        color: var(--secondary);
        font-weight: 600;
        margin-bottom: 20px;
        font-size: 1em;
      }

      .supervisor-info {
        background: white;
        padding: 15px;
        border-radius: 10px;
        margin: 15px 0;
        line-height: 2;
        font-size: 0.9em;
      }

      [data-theme="dark"] .supervisor-info {
        background: #1f2937;
      }

      .expertise {
        margin-top: 15px;
        padding: 15px;
        background: white;
        border-radius: 10px;
      }

      [data-theme="dark"] .expertise {
        background: #1f2937;
      }

      .tag {
        display: inline-block;
        padding: 5px 12px;
        background: var(--primary);
        color: white;
        border-radius: 15px;
        font-size: 0.85em;
      }

      .info-box {
        background: var(--light);
        padding: 20px;
        border-radius: 12px;
        border-left: 4px solid var(--primary);
      }

      [data-theme="dark"] .info-box {
        background: #374151;
      }

      .info-box strong {
        color: var(--primary);
        display: block;
        margin-bottom: 10px;
      }

      .info-box p {
        margin: 0;
      }

      /* Ø«ÙŠÙ…Ø§Øª */
      .theme-preview {
        background: var(--light);
        border-radius: 12px;
        margin: 20px 0;
        padding: 20px;
        border: 3px dashed var(--primary);
      }

      [data-theme="dark"] .theme-preview {
        background: #374151;
      }

      /* Ø²Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ØµÙˆØªÙŠ */
      #voiceBtn.listening {
        animation: pulse-voice 1.5s infinite;
        background: var(--danger);
      }

      @keyframes pulse-voice {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
      }

      /* Responsive */
      @media (max-width: 768px) {
        .header {
          flex-direction: column;
          text-align: center;
        }

        .grid {
          grid-template-columns: 1fr;
        }

        .schedule-item {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body data-theme="light">
    <div class="container">
      <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
      <div class="header">
        <div class="header-left">
          <h1>ğŸªŸ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ø°ÙƒÙŠØ© Pro</h1>
          <div class="status-badges">
            <span class="badge badge-offline" id="connectionBadge"
              >ØºÙŠØ± Ù…ØªØµÙ„</span
            >
            <span class="badge badge-manual" id="modeBadge">--</span>
          </div>
        </div>
        <div style="display: flex; gap: 10px; align-items: center">
          <span id="ipDisplay" style="opacity: 0.7">IP: --</span>
          <button
            class="theme-toggle"
            onclick="toggleTheme()"
            title="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹"
          >
            ğŸŒ™
          </button>
        </div>
      </div>

      <!-- ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ù…Ø·Ø± -->
      <div class="alert alert-danger" id="rainAlert">
        <strong>âš ï¸ ØªØ­Ø°ÙŠØ±!</strong> ÙŠÙˆØ¬Ø¯ Ù…Ø·Ø±! ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.
      </div>

      <!-- Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª -->
      <div class="tabs">
        <button class="tab active" onclick="switchTab('dashboard')">
          ğŸ  Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
        </button>
        <button class="tab" onclick="switchTab('control')">ğŸ® Ø§Ù„ØªØ­ÙƒÙ…</button>
        <button class="tab" onclick="switchTab('voice')">
          ğŸ¤ Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ØµÙˆØªÙŠ
        </button>
        <button class="tab" onclick="switchTab('scenes')">
          ğŸ­ Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª
        </button>
        <button class="tab" onclick="switchTab('schedule')">â° Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø©</button>
        <button class="tab" onclick="switchTab('charts')">
          ğŸ“Š Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ©
        </button>
        <button class="tab" onclick="switchTab('logs')">ğŸ“ Ø§Ù„Ø³Ø¬Ù„</button>
        <button class="tab" onclick="switchTab('settings')">
          âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        </button>
        <button class="tab" onclick="switchTab('team')">ğŸ‘¥ Ø§Ù„ÙØ±ÙŠÙ‚</button>
      </div>

      <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª -->

      <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
      <div id="dashboard" class="tab-content active">
        <!-- Ø´Ø¹Ø§Ø± Ø§Ù„Ø¬Ø§Ù…Ø¹Ø© ÙˆÙ…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ -->
        <div class="card" style="text-align: center; margin-bottom: 20px">
          <div class="university-logo">
            <img
              src="https://i.ibb.co/20dDFyW1/images.jpg"
              alt="Ø´Ø¹Ø§Ø± Ø¬Ø§Ù…Ø¹Ø© Ù…ØµØ·ÙÙ‰ Ø§Ø³Ø·Ù…Ø¨ÙˆÙ„ÙŠ - Ù…Ø¹Ø³ÙƒØ±"
              onerror="this.onerror=null; this.src='https://via.placeholder.com/150x150/004d00/ffffff?text=UMAB';"
              style="
                width: 150px;
                height: 150px;
                border-radius: 50%;
                margin: 20px auto;
                box-shadow: 0 8px 30px rgba(0, 150, 255, 0.5);
                border: 5px solid rgba(255, 255, 255, 0.2);
                background: white;
                padding: 15px;
                object-fit: contain;
                transition: transform 0.3s ease, box-shadow 0.3s ease;
                display: block;
              "
              onmouseover="this.style.transform='scale(1.1) rotate(5deg)'; this.style.boxShadow='0 12px 40px rgba(0,150,255,0.7)';"
              onmouseout="this.style.transform='scale(1) rotate(0deg)'; this.style.boxShadow='0 8px 30px rgba(0,150,255,0.5)';"
            />
          </div>
          <h2 style="color: var(--primary); font-size: 1.8em; margin: 15px 0">
            Ø¬Ø§Ù…Ø¹Ø© Ù…ØµØ·ÙÙ‰ Ø§Ø³Ø·Ù…Ø¨ÙˆÙ„ÙŠ -Ù…Ø¹Ø³ÙƒØ±
          </h2>
          <h3 style="color: var(--secondary); font-size: 1.3em; margin: 10px 0">
            DÃ©partement d'Electrotechnique
          </h3>
          <p style="font-size: 1.1em; opacity: 0.8; margin: 10px 0">
            Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ø°ÙƒÙŠØ© - Smart Window Project
          </p>
          <p style="font-size: 0.95em; opacity: 0.7">
            Ù‚Ø³Ù… Ø§Ù„Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© | Ù…Ø´Ø±ÙˆØ¹ ØªØ®Ø±Ø¬ 2025-2026
          </p>
        </div>

        <!-- Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„ÙØ±ÙŠÙ‚ -->
        <div class="card">
          <h3 class="card-title">ğŸ‘¥ ÙØ±ÙŠÙ‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</h3>
          <div
            style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
              gap: 20px;
            "
          >
            <!-- Ø¹Ø¶Ùˆ 1 -->
            <div class="team-member">
              <img
                src="https://imgur.com/UBXZgCX.jpg"
                alt="ØµÙˆØ±Ø© Ø´Ø®ØµÙŠØ©"
                onerror="this.onerror=null; this.src='https://via.placeholder.com/150x150/004d00/ffffff?text=UMAB';"
                style="
                  width: 150px;
                  height: 150px;
                  border-radius: 50%;
                  margin: 20px auto;
                  box-shadow: 0 8px 30px rgba(0, 150, 255, 0.5);
                  border: 5px solid rgba(255, 255, 255, 0.2);
                  background: white;
                  padding: 15px;
                  object-fit: contain;
                  transition: transform 0.3s ease, box-shadow 0.3s ease;
                  display: block;
                "
                onmouseover="this.style.transform='scale(1.1) rotate(5deg)'; this.style.boxShadow='0 12px 40px rgba(0,150,255,0.7)';"
                onmouseout="this.style.transform='scale(1) rotate(0deg)'; this.style.boxShadow='0 8px 30px rgba(0,150,255,0.5)';"
              />

              <div class="member-avatar"></div>
              <h4>Mokhefi kheir eddine</h4>
              <p class="member-role">Ã©tudiant</p>
              <div class="member-info">
                <div>
                  ğŸ“§
                  <a
                    href="mailto:kheirdinnemokhfi@gmail.com"
                    style="color: var(--primary); text-decoration: none"
                    >kheirdinnemokhfi@gmail.com</a
                  >
                </div>
                <div>
                  ğŸ“±
                  <a
                    href="tel:+213 676 941 636"
                    style="color: var(--primary); text-decoration: none"
                    >+213 676 941 636</a
                  >
                </div>
                <div>
                  ğŸ“²
                  <a
                    href="https://wa.me/213676941636"
                    target="_blank"
                    style="color: #25d366; text-decoration: none"
                    >WhatsApp</a
                  >
                </div>
                <div>
                  âœˆï¸
                  <a
                    href="https://t.me/+213676941636"
                    target="_blank"
                    style="color: #0088cc; text-decoration: none"
                    >Telegram</a
                  >
                </div>
                <a href="https://www.facebook.com/kheiro.dinne" target="_blank"
                  >ğŸ”— Facebook</a
                >
                <div>ğŸ“ Ù‡Ù†Ø¯Ø³Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</div>
              </div>
              <div class="social-links">
                <a
                  href="https://www.linkedin.com/in/kheirdinne-mokhfi-5a4b54261"
                  target="_blank"
                  class="social-btn"
                  >linkedin</a
                >
                <a
                  href="https://github.com/kheirdinnemokhfi-commits"
                  target="_blank"
                  class="social-btn"
                  >GitHub</a
                >
              </div>
            </div>

            <!-- Ø¹Ø¶Ùˆ 2 -->
            <div class="team-member">
              <div class="member-avatar"></div>
              <img
                src="https://imgur.com/dEB1aJ0.jpg"
                alt="ØµÙˆØ±Ø© Ø´Ø®ØµÙŠØ©"
                onerror="this.onerror=null; this.src='https://via.placeholder.com/150x150/004d00/ffffff?text=UMAB';"
                style="
                  width: 150px;
                  height: 150px;
                  border-radius: 50%;
                  margin: 20px auto;
                  box-shadow: 0 8px 30px rgba(0, 150, 255, 0.5);
                  border: 5px solid rgba(255, 255, 255, 0.2);
                  background: white;
                  padding: 15px;
                  object-fit: contain;
                  transition: transform 0.3s ease, box-shadow 0.3s ease;
                  display: block;
                "
                onmouseover="this.style.transform='scale(1.1) rotate(5deg)'; this.style.boxShadow='0 12px 40px rgba(0,150,255,0.7)';"
                onmouseout="this.style.transform='scale(1) rotate(0deg)'; this.style.boxShadow='0 8px 30px rgba(0,150,255,0.5)';"
              />

              <h4>mimouni Ibrahim Elkhallil</h4>
              <p class="member-role">Ã©tudiant</p>
              <div class="member-info">
                <div>
                  ğŸ“§
                  <a
                    href="mailto:mimounib903@gmail.com"
                    style="color: var(--primary); text-decoration: none"
                    >mimounib903@gmail.com</a
                  >
                </div>
                <div>
                  ğŸ“±
                  <a
                    href="tel:+213 668 781 399"
                    style="color: var(--primary); text-decoration: none"
                    >+213 668 781 399</a
                  >
                </div>
                <div>
                  ğŸ“²
                  <a
                    href="https://wa.me/213668781399"
                    target="_blank"
                    style="color: #25d366; text-decoration: none"
                    >WhatsApp</a
                  >
                </div>
                <div>
                  âœˆï¸
                  <a
                    href="https://t.me/+213559781399"
                    target="_blank"
                    style="color: #0088cc; text-decoration: none"
                    >Telegram</a
                  >
                </div>
                <a
                  href="https://www.facebook.com/brahim.mimo.5439"
                  target="_blank"
                  >ğŸ”— Facebook</a
                >
                <div>ğŸ“ Ù‡Ù†Ø¯Ø³Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</div>
              </div>
            </div>

            <!-- Ø¹Ø¶Ùˆ 3 -->
            <div class="team-member">
              <div class="member-avatar"></div>
              <img
                src="https://imgur.com/IuVHzPP.jpg"
                alt="ØµÙˆØ±Ø© Ø´Ø®ØµÙŠØ©"
                onerror="this.onerror=null; this.src='https://via.placeholder.com/150x150/004d00/ffffff?text=UMAB';"
                style="
                  width: 150px;
                  height: 150px;
                  border-radius: 50%;
                  margin: 20px auto;
                  box-shadow: 0 8px 30px rgba(0, 150, 255, 0.5);
                  border: 5px solid rgba(255, 255, 255, 0.2);
                  background: white;
                  padding: 15px;
                  object-fit: contain;
                  transition: transform 0.3s ease, box-shadow 0.3s ease;
                  display: block;
                "
                onmouseover="this.style.transform='scale(1.1) rotate(5deg)'; this.style.boxShadow='0 12px 40px rgba(0,150,255,0.7)';"
                onmouseout="this.style.transform='scale(1) rotate(0deg)'; this.style.boxShadow='0 8px 30px rgba(0,150,255,0.5)';"
              />

              <h4>Megdad Abdrahmane</h4>
              <p class="member-role">Ã©tudiant</p>
              <div class="member-info">
                <div>
                  ğŸ“§
                  <a
                    href="mailto:megdadmegdad4@gmail.com"
                    style="color: var(--primary); text-decoration: none"
                    >megdadmegdad4@gmail.com</a
                  >
                </div>
                <div>
                  ğŸ“±
                  <a
                    href="tel:+213 540 930 273"
                    style="color: var(--primary); text-decoration: none"
                    >+213 540 930 273</a
                  >
                </div>
                <div>
                  ğŸ“²
                  <a
                    href="https://wa.me/+213540930273"
                    target="_blank"
                    style="color: #25d366; text-decoration: none"
                    >WhatsApp</a
                  >
                </div>
                <div>
                  âœˆï¸
                  <a
                    href="https://t.me/+213676683038"
                    target="_blank"
                    style="color: #0088cc; text-decoration: none"
                    >Telegram</a
                  >
                </div>
                <a
                  href="https://www.facebook.com/megdad.abdo.erahmen"
                  target="_blank"
                  >ğŸ”— Facebook</a
                >
                <div>ğŸ“ Ù‡Ù†Ø¯Ø³Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</div>
              </div>
            </div>

            <!-- Ø¹Ø¶Ùˆ 4 -->
            <div class="team-member">
              <div class="member-avatar"></div>
              <img
                src="https://imgur.com/MHGYWJT.jpg"
                alt="ØµÙˆØ±Ø© Ø´Ø®ØµÙŠØ©"
                onerror="this.onerror=null; this.src='https://via.placeholder.com/150x150/004d00/ffffff?text=UMAB';"
                style="
                  width: 150px;
                  height: 150px;
                  border-radius: 50%;
                  margin: 20px auto;
                  box-shadow: 0 8px 30px rgba(0, 150, 255, 0.5);
                  border: 5px solid rgba(255, 255, 255, 0.2);
                  background: white;
                  padding: 15px;
                  object-fit: contain;
                  transition: transform 0.3s ease, box-shadow 0.3s ease;
                  display: block;
                "
                onmouseover="this.style.transform='scale(1.1) rotate(5deg)'; this.style.boxShadow='0 12px 40px rgba(0,150,255,0.7)';"
                onmouseout="this.style.transform='scale(1) rotate(0deg)'; this.style.boxShadow='0 8px 30px rgba(0,150,255,0.5)';"
              />

              <h4>Nedir abdelmadjid</h4>
              <p class="member-role">Ã©tudiant</p>
              <div class="member-info">
                <div>
                  ğŸ“§
                  <a
                    href="mailto:nedirabdo04@gmail.com"
                    style="color: var(--primary); text-decoration: none"
                    >nedirabdo04@gmail.com</a
                  >
                </div>
                <div>
                  ğŸ“±
                  <a
                    href="tel:+213 555 456 789"
                    style="color: var(--primary); text-decoration: none"
                    >+213 555 456 789</a
                  >
                </div>
                <div>
                  ğŸ“²
                  <a
                    href="https://wa.me/+2136850444922"
                    target="_blank"
                    style="color: #25d366; text-decoration: none"
                    >WhatsApp</a
                  >
                </div>
                <div>
                  âœˆï¸
                  <a
                    href="https://t.me/+2136850444922"
                    target="_blank"
                    style="color: #0088cc; text-decoration: none"
                    >Telegram</a
                  >
                </div>
                <a href="https://www.facebook.com/ab.dou.904533" target="_blank"
                  >ğŸ”— Facebook</a
                >
                <div>ğŸ“ Ù‡Ù†Ø¯Ø³Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Ø§Ù„Ø£Ø³Ø§ØªØ°Ø© Ø§Ù„Ù…Ø´Ø±ÙÙˆÙ† -->
        <div class="card">
          <h3 class="card-title">ğŸ‘¨â€ğŸ« Ø§Ù„Ø£Ø³Ø§ØªØ°Ø© Ø§Ù„Ù…Ø´Ø±ÙÙˆÙ†</h3>
          <div
            style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
              gap: 20px;
            "
          >
            <!-- Ù…Ø´Ø±Ù 1 -->
            <div class="supervisor-card">
              <div class="supervisor-avatar"></div>
              <img
                src="https://imgur.com/Ydo3qPq.jpg"
                alt="ØµÙˆØ±Ø© Ø´Ø®ØµÙŠØ©"
                onerror="this.onerror=null; this.src='https://via.placeholder.com/150x150/004d00/ffffff?text=UMAB';"
                style="
                  width: 150px;
                  height: 150px;
                  border-radius: 50%;
                  margin: 20px auto;
                  box-shadow: 0 8px 30px rgba(0, 150, 255, 0.5);
                  border: 5px solid rgba(255, 255, 255, 0.2);
                  background: white;
                  padding: 15px;
                  object-fit: contain;
                  transition: transform 0.3s ease, box-shadow 0.3s ease;
                  display: block;
                "
                onmouseover="this.style.transform='scale(1.1) rotate(5deg)'; this.style.boxShadow='0 12px 40px rgba(0,150,255,0.7)';"
                onmouseout="this.style.transform='scale(1) rotate(0deg)'; this.style.boxShadow='0 8px 30px rgba(0,150,255,0.5)';"
              />

              <h4>Dr.hebali mourad</h4>
              <p class="supervisor-title">
                PhD in Electrical Engineering Professor (Associate)
              </p>
              <div class="supervisor-info">
                <div>ğŸ›ï¸ Ø¬Ø§Ù…Ø¹Ø© Ù…Ø¹Ø³ÙƒØ± Ù„Ù„Ø¹Ù„ÙˆÙ… ÙˆØ§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§</div>
                <div>
                  ğŸ“§
                  <a
                    href="mailto:hebalimourad@yahoo.fr"
                    style="color: var(--primary); text-decoration: none"
                    >hebalimourad@yahoo.fr</a
                  >
                </div>
                <div>ğŸ“§ mourad.hebali@univ-mascara.dz</div>
                <div>Grade : MaÃ®tre Assistant classe B (MCB)</div>
                <div class="expertise">
                  <div class="social-links">
                    <a
                      href="https://www.linkedin.com/in/mourad-hebali-10196675/"
                      target="_blank"
                      class="social-btn"
                      >linkedin</a
                    >
                  </div>
                </div>
              </div>

              <!-- Ù…Ø´Ø±Ù 2 -->
              <div class="supervisor-card">
                <div class="supervisor-avatar"></div>
                <img
                  src="https://imgur.com/jn3YVFt.jpg"
                  alt="ØµÙˆØ±Ø© Ø´Ø®ØµÙŠØ©"
                  onerror="this.onerror=null; this.src='https://via.placeholder.com/150x150/004d00/ffffff?text=UMAB';"
                  style="
                    width: 150px;
                    height: 150px;
                    border-radius: 50%;
                    margin: 20px auto;
                    box-shadow: 0 8px 30px rgba(0, 150, 255, 0.5);
                    border: 5px solid rgba(255, 255, 255, 0.2);
                    background: white;
                    padding: 15px;
                    object-fit: contain;
                    transition: transform 0.3s ease, box-shadow 0.3s ease;
                    display: block;
                  "
                  onmouseover="this.style.transform='scale(1.1) rotate(5deg)'; this.style.boxShadow='0 12px 40px rgba(0,150,255,0.7)';"
                  onmouseout="this.style.transform='scale(1) rotate(0deg)'; this.style.boxShadow='0 8px 30px rgba(0,150,255,0.5)';"
                />

                <h4>Dr. ZOUGGARET Abdelhak</h4>
                <p class="supervisor-title">
                  Doctor of Engineering Professor (Assistant)
                </p>
                <div class="supervisor-info">
                  <div>ğŸ›ï¸ Ø¬Ø§Ù…Ø¹Ø© Ù…Ø¹Ø³ÙƒØ± Ù„Ù„Ø¹Ù„ÙˆÙ… ÙˆØ§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§</div>
                  <div>
                    ğŸ“§
                    <a
                      href="mailto:zouggaret@yahoo.fr"
                      style="color: var(--primary); text-decoration: none"
                      >zouggaret@yahoo.fr</a
                    >
                  </div>

                  <div>ğŸ“§ a.zouggaret@univ-mascara.dz</div>
                  <div>Grade : Maitre de confÃ©rence classe B</div>
                </div>
                <div class="expertise"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø§Øª ÙˆØ§Ù„Ø­Ø§Ù„Ø© -->
        <div class="grid">
          <div class="card">
            <h3 class="card-title">ğŸ“Š Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø§Øª</h3>
            <div class="sensor-grid">
              <div class="sensor-item">
                <div class="sensor-label">ğŸŒ¡ï¸ Ø§Ù„Ø­Ø±Ø§Ø±Ø©</div>
                <div class="sensor-value loading" id="temp">--Â°C</div>
              </div>
              <div class="sensor-item">
                <div class="sensor-label">ğŸ’§ Ø§Ù„Ø±Ø·ÙˆØ¨Ø©</div>
                <div class="sensor-value loading" id="hum">--%</div>
              </div>
              <div class="sensor-item">
                <div class="sensor-label">â˜€ï¸ Ø§Ù„Ø¥Ø¶Ø§Ø¡Ø©</div>
                <div class="sensor-value loading" id="light">--</div>
              </div>
              <div class="sensor-item">
                <div class="sensor-label">ğŸŒ§ï¸ Ø§Ù„Ù…Ø·Ø±</div>
                <div class="sensor-value loading" id="rain">--</div>
              </div>
            </div>
          </div>

          <div class="card">
            <h3 class="card-title">ğŸ“ˆ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h3>
            <div class="stat-grid">
              <div class="stat-card">
                <div class="sensor-label">â±ï¸ ÙˆÙ‚Øª Ø§Ù„ØªØ´ØºÙŠÙ„</div>
                <div class="stat-value" id="uptime">--</div>
              </div>
              <div class="stat-card">
                <div class="sensor-label">ğŸªŸ Ø­Ø±ÙƒØ§Øª Ø§Ù„Ù†Ø§ÙØ°Ø©</div>
                <div class="stat-value" id="windowMoves">--</div>
              </div>
              <div class="stat-card">
                <div class="sensor-label">ğŸ­ Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø³ØªØ§Ø±Ø©</div>
                <div class="stat-value" id="blindMoves">--</div>
              </div>
              <div class="stat-card">
                <div class="sensor-label">ğŸŒ§ï¸ Ù…Ø±Ø§Øª Ø§Ù„Ù…Ø·Ø±</div>
                <div class="stat-value" id="rainCount">--</div>
              </div>
            </div>
          </div>

          <div class="card">
            <h3 class="card-title">ğŸªŸ Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø§ÙØ°Ø©</h3>
            <div class="visual-container">
              <div class="window-frame" id="windowFrame"></div>
            </div>
            <div
              style="
                text-align: center;
                font-size: 1.5em;
                font-weight: bold;
                color: var(--primary);
              "
            >
              <span id="windowPosDisplay">0</span>%
            </div>
          </div>

          <div class="card">
            <h3 class="card-title">ğŸ­ Ø­Ø§Ù„Ø© Ø§Ù„Ø³ØªØ§Ø±Ø©</h3>
            <div class="visual-container" style="background: #f3f4f6">
              <div class="blind-overlay" id="blindOverlay"></div>
            </div>
            <div
              style="
                text-align: center;
                font-size: 1.5em;
                font-weight: bold;
                color: var(--primary);
              "
            >
              <span id="blindPosDisplay">0</span>%
            </div>
          </div>
        </div>
      </div>

      <!-- Ø§Ù„ØªØ­ÙƒÙ… -->
      <div id="control" class="tab-content">
        <div class="grid">
          <div class="card">
            <h3 class="card-title">ğŸªŸ Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù†Ø§ÙØ°Ø©</h3>
            <div class="visual-container">
              <div class="window-frame" id="windowFrame2"></div>
            </div>
            <div class="slider-container">
              <div class="slider-header">
                <span>Ù…ÙˆØ¶Ø¹ Ø§Ù„Ù†Ø§ÙØ°Ø©</span>
                <span id="windowSliderLabel">0%</span>
              </div>
              <input
                type="range"
                min="0"
                max="100"
                value="0"
                class="slider"
                id="windowSlider"
                oninput="updateWindowPreview(this.value)"
                onchange="setWindow(this.value)"
              />
            </div>
            <button class="btn btn-primary" onclick="setWindow(0)">
              Ø¥ØºÙ„Ø§Ù‚ ÙƒØ§Ù…Ù„
            </button>
            <button class="btn btn-success" onclick="setWindow(100)">
              ÙØªØ­ ÙƒØ§Ù…Ù„
            </button>
          </div>

          <div class="card">
            <h3 class="card-title">ğŸ­ Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø³ØªØ§Ø±Ø©</h3>
            <div class="visual-container" style="background: #f3f4f6">
              <div class="blind-overlay" id="blindOverlay2"></div>
            </div>
            <div class="slider-container">
              <div class="slider-header">
                <span>Ù…ÙˆØ¶Ø¹ Ø§Ù„Ø³ØªØ§Ø±Ø©</span>
                <span id="blindSliderLabel">0%</span>
              </div>
              <input
                type="range"
                min="0"
                max="100"
                value="0"
                class="slider"
                id="blindSlider"
                oninput="updateBlindPreview(this.value)"
                onchange="setBlind(this.value)"
              />
            </div>
            <button class="btn btn-primary" onclick="setBlind(0)">
              Ø¥ØºÙ„Ø§Ù‚ ÙƒØ§Ù…Ù„
            </button>
            <button class="btn btn-success" onclick="setBlind(100)">
              ÙØªØ­ ÙƒØ§Ù…Ù„
            </button>
          </div>

          <div class="card">
            <h3 class="card-title">ğŸ¤– Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</h3>
            <div class="switch-container">
              <span>ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</span>
              <label class="switch">
                <input
                  type="checkbox"
                  id="autoModeSwitch"
                  onchange="toggleAutoMode()"
                />
                <span class="switch-slider"></span>
              </label>
            </div>
            <div class="switch-container">
              <span>ØªØ­ÙƒÙ… ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø§Ù„Ù†Ø§ÙØ°Ø©</span>
              <label class="switch">
                <input
                  type="checkbox"
                  id="autoWindowSwitch"
                  onchange="toggleAutoWindow()"
                />
                <span class="switch-slider"></span>
              </label>
            </div>
            <div class="switch-container">
              <span>ØªØ­ÙƒÙ… ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø§Ù„Ø³ØªØ§Ø±Ø©</span>
              <label class="switch">
                <input
                  type="checkbox"
                  id="autoBlindsSwitch"
                  onchange="toggleAutoBlinds()"
                />
                <span class="switch-slider"></span>
              </label>
            </div>
          </div>
        </div>
      </div>

      <!-- Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª -->
      <div id="scenes" class="tab-content">
        <div class="card">
          <h3 class="card-title">ğŸ­ Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©</h3>
          <div class="scene-grid" id="scenesContainer">
            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¦Ù‡Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
          </div>
        </div>
      </div>

      <!-- Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø© -->
      <div id="schedule" class="tab-content">
        <div class="card">
          <h3 class="card-title">â° Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…Ù‡Ø§Ù…</h3>
          <div id="schedulesContainer">
            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¦Ù‡Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
          </div>
          <button class="btn btn-primary" onclick="saveSchedules()">
            ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø©
          </button>
        </div>
      </div>

      <!-- Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© -->
      <div id="charts" class="tab-content">
        <div class="grid">
          <div class="card">
            <h3 class="card-title">ğŸŒ¡ï¸ Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø© (Ø¢Ø®Ø± 24 Ø³Ø§Ø¹Ø©)</h3>
            <div class="chart-container">
              <canvas id="tempChart"></canvas>
            </div>
          </div>
          <div class="card">
            <h3 class="card-title">ğŸ’§ Ø§Ù„Ø±Ø·ÙˆØ¨Ø© (Ø¢Ø®Ø± 24 Ø³Ø§Ø¹Ø©)</h3>
            <div class="chart-container">
              <canvas id="humChart"></canvas>
            </div>
          </div>
          <div class="card">
            <h3 class="card-title">â˜€ï¸ Ø§Ù„Ø¥Ø¶Ø§Ø¡Ø© (Ø¢Ø®Ø± 24 Ø³Ø§Ø¹Ø©)</h3>
            <div class="chart-container">
              <canvas id="lightChart"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- Ø§Ù„Ø³Ø¬Ù„ -->
      <div id="logs" class="tab-content">
        <div class="card">
          <h3 class="card-title">ğŸ“ Ø³Ø¬Ù„ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«</h3>
          <div class="log-container" id="logsContainer">
            <div class="log-entry">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¬Ù„...</div>
          </div>
          <button class="btn btn-primary" onclick="loadLogs()">
            ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¬Ù„
          </button>
        </div>
      </div>

      <!-- Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ØµÙˆØªÙŠ -->
      <div id="voice" class="tab-content">
        <div class="grid">
          <div class="card">
            <h3 class="card-title">ğŸ¤ Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ØµÙˆØªÙŠ</h3>
            <div style="text-align: center; margin: 30px 0">
              <div
                id="voiceStatus"
                style="font-size: 1.2em; margin: 20px 0; color: var(--primary)"
              >
                ğŸ¤ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± ÙˆØªØ­Ø¯Ø«
              </div>
              <button
                class="btn btn-primary"
                id="voiceBtn"
                onclick="startVoiceControl()"
                style="
                  font-size: 1.5em;
                  padding: 30px 50px;
                  border-radius: 50%;
                  width: auto;
                "
              >
                ğŸ¤
              </button>
            </div>

            <div class="switch-container">
              <span>ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ØµÙˆØªÙŠ Ø§Ù„Ù…Ø³ØªÙ…Ø±</span>
              <label class="switch">
                <input
                  type="checkbox"
                  id="continuousVoice"
                  onchange="toggleContinuousVoice()"
                />
                <span class="switch-slider"></span>
              </label>
            </div>

            <div
              style="
                background: var(--light);
                padding: 20px;
                border-radius: 10px;
                margin: 20px 0;
              "
            >
              <h4 style="margin-bottom: 15px; color: var(--primary)">
                Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ù…ØªØ§Ø­Ø©:
              </h4>
              <div style="display: grid; gap: 10px; font-size: 0.95em">
                <div>
                  ğŸªŸ <strong>"Ø§ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø©"</strong> - ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø© ÙƒØ§Ù…Ù„Ø§Ù‹
                </div>
                <div>ğŸªŸ <strong>"Ø§ØºÙ„Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©"</strong> - Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©</div>
                <div>ğŸ­ <strong>"Ø§ÙØªØ­ Ø§Ù„Ø³ØªØ§Ø±Ø©"</strong> - ÙØªØ­ Ø§Ù„Ø³ØªØ§Ø±Ø©</div>
                <div>ğŸ­ <strong>"Ø§ØºÙ„Ù‚ Ø§Ù„Ø³ØªØ§Ø±Ø©"</strong> - Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø³ØªØ§Ø±Ø©</div>
                <div>
                  ğŸ¤– <strong>"ÙˆØ¶Ø¹ ØªÙ„Ù‚Ø§Ø¦ÙŠ"</strong> - ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
                </div>
                <div>âœ‹ <strong>"ÙˆØ¶Ø¹ ÙŠØ¯ÙˆÙŠ"</strong> - ØªØ¹Ø·ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</div>
                <div>
                  ğŸŒ… <strong>"Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ ØµØ¨Ø§Ø­"</strong> - ØªÙØ¹ÙŠÙ„ Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø§Ù„ØµØ¨Ø§Ø­
                </div>
                <div>
                  ğŸŒ™ <strong>"Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ù†ÙˆÙ…"</strong> - ØªÙØ¹ÙŠÙ„ Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø§Ù„Ù†ÙˆÙ…
                </div>
              </div>
            </div>

            <div
              id="voiceHistory"
              style="
                background: var(--light);
                padding: 15px;
                border-radius: 10px;
                max-height: 200px;
                overflow-y: auto;
              "
            >
              <strong>Ø³Ø¬Ù„ Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„ØµÙˆØªÙŠØ©:</strong>
              <div id="voiceHistoryList" style="margin-top: 10px"></div>
            </div>
          </div>

          <div class="card">
            <h3 class="card-title">ğŸŒ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„ØºØ©</h3>
            <div class="input-group">
              <label class="input-label">Ù„ØºØ© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ØµÙˆØªÙŠ:</label>
              <select
                class="input-field"
                id="voiceLang"
                onchange="changeVoiceLang()"
              >
                <option value="ar-SA">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ‡¸ğŸ‡¦</option>
                <option value="en-US">English ğŸ‡ºğŸ‡¸</option>
                <option value="fr-FR">FranÃ§ais ğŸ‡«ğŸ‡·</option>
              </select>
            </div>

            <div class="input-group">
              <label class="input-label">Ù„ØºØ© Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©:</label>
              <select
                class="input-field"
                id="interfaceLang"
                onchange="changeInterfaceLang()"
              >
                <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ‡¸ğŸ‡¦</option>
                <option value="en">English ğŸ‡ºğŸ‡¸</option>
                <option value="fr">FranÃ§ais ğŸ‡«ğŸ‡·</option>
              </select>
            </div>

            <div class="switch-container">
              <span>ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø±Ø¯ÙˆØ¯ Ø§Ù„ØµÙˆØªÙŠØ©</span>
              <label class="switch">
                <input type="checkbox" id="voiceFeedback" checked />
                <span class="switch-slider"></span>
              </label>
            </div>
          </div>
        </div>
      </div>

      <!-- Ø§Ù„ÙØ±ÙŠÙ‚ -->
      <div id="team" class="tab-content">
        <div class="card" style="text-align: center">
          <h3 class="card-title">ğŸ“‹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ø¹Ù† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</h3>
          <div
            style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
              gap: 20px;
              margin-top: 20px;
            "
          >
            <div class="info-box">
              <strong>ğŸ“ Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©:</strong>
              <p>Ø¬Ø§Ù…Ø¹Ø© ÙˆÙ‡Ø±Ø§Ù† Ù„Ù„Ø¹Ù„ÙˆÙ… ÙˆØ§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§</p>
            </div>
            <div class="info-box">
              <strong>ğŸ“š Ø§Ù„Ù‚Ø³Ù…:</strong>
              <p>Ù‚Ø³Ù… Ø§Ù„Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</p>
            </div>
            <div class="info-box">
              <strong>ğŸ“… Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©:</strong>
              <p>2025-2026</p>
            </div>
            <div class="info-box">
              <strong>ğŸ“Š Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:</strong>
              <p>Ù…Ø´Ø±ÙˆØ¹ ØªØ®Ø±Ø¬ - PFE</p>
            </div>
            <div class="info-box">
              <strong>ğŸ”¬ Ø§Ù„Ù…Ø¬Ø§Ù„:</strong>
              <p>Internet of Things & Smart Home</p>
            </div>
            <div class="info-box">
              <strong>ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹:</strong>
              <p>Ù…Ø¹Ø³ÙƒØ±ØŒ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± ğŸ‡©ğŸ‡¿</p>
            </div>
            <div class="info-box">
              <strong>ğŸ› ï¸ Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©:</strong>
              <p>WeMos D1 wifi, Arduino, IoT, WebSocket</p>
            </div>
            <div class="info-box">
              <strong>â±ï¸ Ù…Ø¯Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:</strong>
              <p>6 Ø£Ø´Ù‡Ø± (Ø³Ø¨ØªÙ…Ø¨Ø± 2025 - Ù…Ø§Ø±Ø³ 2026)</p>
            </div>
          </div>

          <div
            style="
              margin-top: 30px;
              padding: 25px;
              background: var(--light);
              border-radius: 15px;
            "
          >
            <h4 style="color: var(--primary); margin-bottom: 15px">
              ğŸ“ Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
            </h4>
            <p style="text-align: justify; line-height: 1.8; font-size: 1.05em">
              Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ø°ÙƒÙŠØ© Ù‡Ùˆ Ù†Ø¸Ø§Ù… Ù…ØªÙƒØ§Ù…Ù„ ÙŠÙ‡Ø¯Ù Ø¥Ù„Ù‰ Ø£ØªÙ…ØªØ© Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ
              Ø§Ù„Ù†ÙˆØ§ÙØ° ÙˆØ§Ù„Ø³ØªØ§Ø¦Ø± Ø§Ù„Ù…Ù†Ø²Ù„ÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ØªÙ‚Ù†ÙŠØ§Øª Ø¥Ù†ØªØ±Ù†Øª Ø§Ù„Ø£Ø´ÙŠØ§Ø¡ (IoT).
              ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø­Ø³Ø§Ø³Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø¸Ø±ÙˆÙ Ø§Ù„Ø¨ÙŠØ¦ÙŠØ© (Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø©ØŒ
              Ø§Ù„Ø±Ø·ÙˆØ¨Ø©ØŒ Ø§Ù„Ø¥Ø¶Ø§Ø¡Ø©ØŒ Ø§Ù„Ù…Ø·Ø±) ÙˆÙŠØªØ®Ø° Ù‚Ø±Ø§Ø±Ø§Øª Ø°ÙƒÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù„ØªÙˆÙÙŠØ± Ø§Ù„Ø±Ø§Ø­Ø©
              ÙˆØªÙˆÙÙŠØ± Ø§Ù„Ø·Ø§Ù‚Ø©. ÙŠØªÙ…ÙŠØ² Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨ÙˆØ§Ø¬Ù‡Ø© ÙˆÙŠØ¨ Ø§Ø­ØªØ±Ø§ÙÙŠØ© ØªÙˆÙØ± ØªØ­ÙƒÙ…Ø§Ù‹ ÙƒØ§Ù…Ù„Ø§Ù‹
              Ø¹Ù† Ø¨ÙØ¹Ø¯ØŒ Ù…Ø¹ Ø¯Ø¹Ù… Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ØµÙˆØªÙŠ Ø¨Ø«Ù„Ø§Ø« Ù„ØºØ§ØªØŒ ÙˆØ§Ù„Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©ØŒ
              ÙˆØ§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ©.
            </p>
          </div>

          <div
            style="
              margin-top: 30px;
              padding: 25px;
              background: var(--light);
              border-radius: 15px;
            "
          >
            <h4 style="color: var(--primary); margin-bottom: 15px">
              ğŸ¯ Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
            </h4>
            <div style="text-align: right; line-height: 2">
              <div>âœ… ØªØ·ÙˆÙŠØ± Ù†Ø¸Ø§Ù… Ø°ÙƒÙŠ Ù…ØªÙƒØ§Ù…Ù„ Ù„Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ù†ÙˆØ§ÙØ° ÙˆØ§Ù„Ø³ØªØ§Ø¦Ø±</div>
              <div>âœ… ØªÙˆÙÙŠØ± Ø§Ù„Ø±Ø§Ø­Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ø£ØªÙ…ØªØ© Ø§Ù„Ø°ÙƒÙŠØ©</div>
              <div>
                âœ… ØªÙ‚Ù„ÙŠÙ„ Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„Ø·Ø§Ù‚Ø© Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø£Ù…Ø«Ù„ ÙÙŠ Ø§Ù„ØªÙ‡ÙˆÙŠØ©
                ÙˆØ§Ù„Ø¥Ø¶Ø§Ø¡Ø©
              </div>
              <div>âœ… ØªÙˆÙÙŠØ± ÙˆØ§Ø¬Ù‡Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø³Ù‡Ù„Ø© ÙˆØ¹ØµØ±ÙŠØ©</div>
              <div>âœ… Ø¯Ø¹Ù… Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ØµÙˆØªÙŠ Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ù„ØºØ§Øª</div>
              <div>âœ… ØªØ·Ø¨ÙŠÙ‚ ØªÙ‚Ù†ÙŠØ§Øª IoT Ø§Ù„Ø­Ø¯ÙŠØ«Ø© ÙÙŠ Ù…Ø¬Ø§Ù„ Ø§Ù„Ù…Ù†Ø²Ù„ Ø§Ù„Ø°ÙƒÙŠ</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
      <div id="settings" class="tab-content">
        <div class="grid">
          <div class="card">
            <h3 class="card-title">ğŸŒ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„</h3>
            <div class="input-group">
              <label class="input-label">Ø¹Ù†ÙˆØ§Ù† IP Ù„Ù„Ù€ WeMos:</label>
              <input
                type="text"
                class="input-field"
                id="wemosIP"
                value="192.168.43.251"
              />
            </div>
            <button class="btn btn-primary" onclick="saveIP()">
              ğŸ’¾ Ø­ÙØ¸ Ø¹Ù†ÙˆØ§Ù† IP
            </button>
          </div>

          <div class="card">
            <h3 class="card-title">ğŸšï¸ Ø¹ØªØ¨Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø§Øª</h3>
            <div class="input-group">
              <label class="input-label">Ø¹ØªØ¨Ø© Ø§Ù„Ø¥Ø¶Ø§Ø¡Ø© (0-1024):</label>
              <input
                type="number"
                class="input-field"
                id="lightThreshold"
                value="500"
                min="0"
                max="1024"
              />
            </div>
            <div class="input-group">
              <label class="input-label">Ø¹ØªØ¨Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø© (Â°C):</label>
              <input
                type="number"
                class="input-field"
                id="tempThreshold"
                value="28"
                min="15"
                max="45"
              />
            </div>
            <button class="btn btn-primary" onclick="saveSettings()">
              ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
            </button>
          </div>

          <div class="card">
            <h3 class="card-title">ğŸ”§ Ù…Ø¹Ø§ÙŠØ±Ø© Ø§Ù„Ø³ÙŠØ±ÙÙˆ</h3>
            <div class="input-group">
              <label class="input-label">Ù…Ø¹Ø§ÙŠØ±Ø© Ø§Ù„Ù†Ø§ÙØ°Ø© (-45 Ø¥Ù„Ù‰ +45):</label>
              <input
                type="number"
                class="input-field"
                id="windowCal"
                value="0"
                min="-45"
                max="45"
              />
            </div>
            <div class="input-group">
              <label class="input-label">Ù…Ø¹Ø§ÙŠØ±Ø© Ø§Ù„Ø³ØªØ§Ø±Ø© (-45 Ø¥Ù„Ù‰ +45):</label>
              <input
                type="number"
                class="input-field"
                id="blindCal"
                value="0"
                min="-45"
                max="45"
              />
            </div>
            <button class="btn btn-primary" onclick="calibrate()">
              ğŸ”§ Ø­ÙØ¸ Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø©
            </button>
          </div>

          <div class="card">
            <h3 class="card-title">ğŸ¨ Ø§Ù„Ø«ÙŠÙ…Ø§Øª (Ø§Ù„Ù…Ø¸Ù‡Ø±)</h3>
            <div class="input-group">
              <label class="input-label">Ø§Ø®ØªØ± Ø§Ù„Ø«ÙŠÙ…:</label>
              <select
                class="input-field"
                id="themeSelect"
                onchange="applyTheme()"
              >
                <option value="light">â˜€ï¸ ÙØ§ØªØ­ (Light)</option>
                <option value="dark">ğŸŒ™ Ø¯Ø§ÙƒÙ† (Dark)</option>
                <option value="blue">ğŸ’™ Ø£Ø²Ø±Ù‚ (Blue)</option>
                <option value="green">ğŸ’š Ø£Ø®Ø¶Ø± (Green)</option>
                <option value="purple">ğŸ’œ Ø¨Ù†ÙØ³Ø¬ÙŠ (Purple)</option>
                <option value="orange">ğŸ§¡ Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ (Orange)</option>
              </select>
            </div>

            <div class="theme-preview" id="themePreview">
              <div style="text-align: center; padding: 20px">
                <div style="font-size: 3em; margin-bottom: 10px">ğŸ¨</div>
                <div>Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ù…Ø®ØªØ§Ø±</div>
              </div>
            </div>

            <div class="switch-container">
              <span>ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ… Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø­Ø³Ø¨ Ø§Ù„ÙˆÙ‚Øª</span>
              <label class="switch">
                <input
                  type="checkbox"
                  id="autoTheme"
                  onchange="toggleAutoTheme()"
                />
                <span class="switch-slider"></span>
              </label>
            </div>
          </div>

          <div class="card">
            <h3 class="card-title">ğŸ¤– Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</h3>

            <div class="input-group">
              <label class="input-label">Ø­Ø³Ø§Ø³ÙŠØ© ÙƒØ´Ù Ø§Ù„Ù…Ø·Ø±:</label>
              <select class="input-field" id="rainSensitivity">
                <option value="low">Ù…Ù†Ø®ÙØ¶Ø© - ÙŠØºÙ„Ù‚ Ø¹Ù†Ø¯ Ù…Ø·Ø± Ù‚ÙˆÙŠ</option>
                <option value="medium" selected>
                  Ù…ØªÙˆØ³Ø·Ø© - ÙŠØºÙ„Ù‚ Ø¹Ù†Ø¯ Ù…Ø·Ø± Ù…ØªÙˆØ³Ø·
                </option>
                <option value="high">Ø¹Ø§Ù„ÙŠØ© - ÙŠØºÙ„Ù‚ Ø¹Ù†Ø¯ Ø£ÙŠ Ù…Ø·Ø±</option>
              </select>
            </div>

            <div class="input-group">
              <label class="input-label">Ø³Ø±Ø¹Ø© Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ù†Ø§ÙØ°Ø© (Ø«Ø§Ù†ÙŠØ©):</label>
              <input
                type="range"
                min="0"
                max="30"
                value="10"
                class="slider"
                id="windowResponseTime"
                oninput="updateResponseTime('window', this.value)"
              />
              <div style="text-align: center; margin-top: 5px">
                <span id="windowResponseLabel">10 Ø«Ø§Ù†ÙŠØ©</span>
              </div>
            </div>

            <div class="input-group">
              <label class="input-label">Ø³Ø±Ø¹Ø© Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ø³ØªØ§Ø±Ø© (Ø«Ø§Ù†ÙŠØ©):</label>
              <input
                type="range"
                min="0"
                max="30"
                value="10"
                class="slider"
                id="blindResponseTime"
                oninput="updateResponseTime('blind', this.value)"
              />
              <div style="text-align: center; margin-top: 5px">
                <span id="blindResponseLabel">10 Ø«Ø§Ù†ÙŠØ©</span>
              </div>
            </div>

            <div class="switch-container">
              <span>Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„ØºÙŠØ§Ø¨</span>
              <label class="switch">
                <input type="checkbox" id="autoCloseAway" />
                <span class="switch-slider"></span>
              </label>
            </div>

            <div class="switch-container">
              <span>Ø§Ù„ØªÙƒÙŠÙ Ø§Ù„Ø°ÙƒÙŠ Ù…Ø¹ Ø§Ù„Ø·Ù‚Ø³</span>
              <label class="switch">
                <input type="checkbox" id="weatherAdaptive" checked />
                <span class="switch-slider"></span>
              </label>
            </div>

            <div class="switch-container">
              <span>ÙˆØ¶Ø¹ ØªÙˆÙÙŠØ± Ø§Ù„Ø·Ø§Ù‚Ø©</span>
              <label class="switch">
                <input type="checkbox" id="energySaving" />
                <span class="switch-slider"></span>
              </label>
            </div>

            <button class="btn btn-primary" onclick="saveAdvancedSettings()">
              ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
            </button>
          </div>
        </div>
      </div>
    </div>

   <script>
      // âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø¹Ø¨Ø± Proxy
      const USE_PROXY = true; // ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆÙƒÙŠÙ„
      const PROXY_HOST = window.location.hostname || "localhost";
      const PROXY_PORT = window.location.port || "8443";
      let WEMOS_IP = USE_PROXY 
        ? `${PROXY_HOST}:${PROXY_PORT}` 
        : (localStorage.getItem("wemosIP") || "192.168.43.251");
      
      let ws = null;
      let charts = {};
      let recognition = null;
      let currentLang = localStorage.getItem("interfaceLang") || "ar";
      let voiceLang = localStorage.getItem("voiceLang") || "ar-SA";

      // Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª
      const translations = {
        ar: {
          dashboard: "Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…",
          control: "Ø§Ù„ØªØ­ÙƒÙ…",
          voice: "Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ØµÙˆØªÙŠ",
          scenes: "Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª",
          schedule: "Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø©",
          charts: "Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ©",
          logs: "Ø§Ù„Ø³Ø¬Ù„",
          settings: "Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",
          team: "Ø§Ù„ÙØ±ÙŠÙ‚",
        },
        en: {
          dashboard: "Dashboard",
          control: "Control",
          voice: "Voice Control",
          scenes: "Scenes",
          schedule: "Schedule",
          charts: "Charts",
          logs: "Logs",
          settings: "Settings",
          team: "Team",
        },
        fr: {
          dashboard: "Tableau de bord",
          control: "ContrÃ´le",
          voice: "ContrÃ´le vocal",
          scenes: "ScÃ©narios",
          schedule: "Planification",
          charts: "Graphiques",
          logs: "Journal",
          settings: "ParamÃ¨tres",
          team: "Ã‰quipe",
        },
      };

      // ØªÙ‡ÙŠØ¦Ø©
      document.getElementById("wemosIP").value = WEMOS_IP;
      initVoiceRecognition();

      // Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ØµÙˆØªÙŠ
      function initVoiceRecognition() {
        if (
          "webkitSpeechRecognition" in window ||
          "SpeechRecognition" in window
        ) {
          const SpeechRecognition =
            window.SpeechRecognition || window.webkitSpeechRecognition;
          recognition = new SpeechRecognition();
          recognition.lang = voiceLang;
          recognition.continuous = false;
          recognition.interimResults = false;

          recognition.onresult = (event) => {
            const command = event.results[0][0].transcript.toLowerCase();
            document.getElementById("voiceStatus").textContent =
              "ğŸ¤ Ø³Ù…Ø¹Øª: " + command;
            processVoiceCommand(command);
            addVoiceHistory(command);
          };

          recognition.onerror = (event) => {
            document.getElementById("voiceStatus").textContent =
              "âŒ Ø®Ø·Ø£: " + event.error;
            document.getElementById("voiceBtn").classList.remove("listening");
          };

          recognition.onend = () => {
            document.getElementById("voiceBtn").classList.remove("listening");
            if (document.getElementById("continuousVoice").checked) {
              setTimeout(() => startVoiceControl(), 1000);
            }
          };
        } else {
          document.getElementById("voiceStatus").textContent =
            "âŒ Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ØµÙˆØªÙŠ";
        }
      }

      function startVoiceControl() {
        if (recognition) {
          recognition.start();
          document.getElementById("voiceBtn").classList.add("listening");
          document.getElementById("voiceStatus").textContent =
            "ğŸ¤ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹...";
        }
      }

      function toggleContinuousVoice() {
        if (document.getElementById("continuousVoice").checked) {
          startVoiceControl();
        }
      }

      function processVoiceCommand(command) {
        let action = "";

        // Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ù†Ø§ÙØ°Ø©
        if (
          command.includes("Ø§ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø©") ||
          command.includes("open window") ||
          command.includes("ouvre fenÃªtre")
        ) {
          setWindow(100);
          action = "ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø©";
        } else if (
          command.includes("Ø§ØºÙ„Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©") ||
          command.includes("close window") ||
          command.includes("ferme fenÃªtre")
        ) {
          setWindow(0);
          action = "Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©";
        }
        // Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø³ØªØ§Ø±Ø©
        else if (
          command.includes("Ø§ÙØªØ­ Ø§Ù„Ø³ØªØ§Ø±Ø©") ||
          command.includes("open blind") ||
          command.includes("ouvre store")
        ) {
          setBlind(100);
          action = "ÙØªØ­ Ø§Ù„Ø³ØªØ§Ø±Ø©";
        } else if (
          command.includes("Ø§ØºÙ„Ù‚ Ø§Ù„Ø³ØªØ§Ø±Ø©") ||
          command.includes("close blind") ||
          command.includes("ferme store")
        ) {
          setBlind(0);
          action = "Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø³ØªØ§Ø±Ø©";
        }
        // Ø£ÙˆØ§Ù…Ø± Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
        else if (
          command.includes("ÙˆØ¶Ø¹ ØªÙ„Ù‚Ø§Ø¦ÙŠ") ||
          command.includes("automatic mode") ||
          command.includes("mode automatique")
        ) {
          document.getElementById("autoModeSwitch").checked = true;
          toggleAutoMode();
          action = "ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ";
        } else if (
          command.includes("ÙˆØ¶Ø¹ ÙŠØ¯ÙˆÙŠ") ||
          command.includes("manual mode") ||
          command.includes("mode manuel")
        ) {
          document.getElementById("autoModeSwitch").checked = false;
          toggleAutoMode();
          action = "ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙŠØ¯ÙˆÙŠ";
        }
        // Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª
        else if (
          command.includes("ØµØ¨Ø§Ø­") ||
          command.includes("morning") ||
          command.includes("matin")
        ) {
          activateScene(0);
          action = "ØªÙØ¹ÙŠÙ„ Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø§Ù„ØµØ¨Ø§Ø­";
        } else if (
          command.includes("Ù†ÙˆÙ…") ||
          command.includes("sleep") ||
          command.includes("sommeil")
        ) {
          activateScene(3);
          action = "ØªÙØ¹ÙŠÙ„ Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø§Ù„Ù†ÙˆÙ…";
        } else if (
          command.includes("ØªÙ‡ÙˆÙŠØ©") ||
          command.includes("ventilation") ||
          command.includes("aÃ©ration")
        ) {
          activateScene(4);
          action = "ØªÙØ¹ÙŠÙ„ Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø§Ù„ØªÙ‡ÙˆÙŠØ©";
        }

        if (action) {
          document.getElementById("voiceStatus").textContent =
            "âœ… ØªÙ…: " + action;
          if (document.getElementById("voiceFeedback").checked) {
            speakResponse(action);
          }
        } else {
          document.getElementById("voiceStatus").textContent =
            "â“ Ø£Ù…Ø± ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
        }
      }

      function speakResponse(text) {
        if ("speechSynthesis" in window) {
          const utterance = new SpeechSynthesisUtterance(text);
          utterance.lang = voiceLang;
          speechSynthesis.speak(utterance);
        }
      }

      function addVoiceHistory(command) {
        const list = document.getElementById("voiceHistoryList");
        const time = new Date().toLocaleTimeString("ar");
        const entry = document.createElement("div");
        entry.style.cssText =
          "padding: 8px; margin: 5px 0; background: white; border-radius: 6px; font-size: 0.9em;";
        entry.textContent = `[${time}] ${command}`;
        list.insertBefore(entry, list.firstChild);

        if (list.children.length > 10) {
          list.removeChild(list.lastChild);
        }
      }

      function changeVoiceLang() {
        voiceLang = document.getElementById("voiceLang").value;
        localStorage.setItem("voiceLang", voiceLang);
        if (recognition) {
          recognition.lang = voiceLang;
        }
      }

      function changeInterfaceLang() {
        currentLang = document.getElementById("interfaceLang").value;
        localStorage.setItem("interfaceLang", currentLang);
        alert("Ø³ÙŠØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù„ØºØ© Ø¨Ø¹Ø¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©");
      }

      // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø«ÙŠÙ…
      const themes = {
        light: {
          "--primary": "#667eea",
          "--secondary": "#764ba2",
          "--bg": "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
        },
        dark: {
          "--primary": "#667eea",
          "--secondary": "#764ba2",
          "--bg": "#111827",
        },
        blue: {
          "--primary": "#3b82f6",
          "--secondary": "#1e40af",
          "--bg": "linear-gradient(135deg, #3b82f6 0%, #1e40af 100%)",
        },
        green: {
          "--primary": "#10b981",
          "--secondary": "#047857",
          "--bg": "linear-gradient(135deg, #10b981 0%, #047857 100%)",
        },
        purple: {
          "--primary": "#a855f7",
          "--secondary": "#7c3aed",
          "--bg": "linear-gradient(135deg, #a855f7 0%, #7c3aed 100%)",
        },
        orange: {
          "--primary": "#f59e0b",
          "--secondary": "#d97706",
          "--bg": "linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",
        },
      };

      function applyTheme() {
        const theme = document.getElementById("themeSelect").value;
        const root = document.documentElement;

        if (theme === "dark") {
          document.body.setAttribute("data-theme", "dark");
        } else {
          document.body.setAttribute("data-theme", "light");
        }

        const colors = themes[theme];
        for (const [key, value] of Object.entries(colors)) {
          root.style.setProperty(key, value);
        }

        localStorage.setItem("selectedTheme", theme);
      }

      function toggleAutoTheme() {
        const enabled = document.getElementById("autoTheme").checked;
        if (enabled) {
          const hour = new Date().getHours();
          if (hour >= 18 || hour < 6) {
            document.getElementById("themeSelect").value = "dark";
          } else {
            document.getElementById("themeSelect").value = "light";
          }
          applyTheme();
        }
      }

      function updateResponseTime(type, value) {
        document.getElementById(`${type}ResponseLabel`).textContent =
          value + " Ø«Ø§Ù†ÙŠØ©";
      }

      function saveAdvancedSettings() {
        const settings = {
          rainSensitivity: document.getElementById("rainSensitivity").value,
          windowResponseTime:
            document.getElementById("windowResponseTime").value,
          blindResponseTime: document.getElementById("blindResponseTime").value,
          autoCloseAway: document.getElementById("autoCloseAway").checked,
          weatherAdaptive: document.getElementById("weatherAdaptive").checked,
          energySaving: document.getElementById("energySaving").checked,
        };

        localStorage.setItem("advancedSettings", JSON.stringify(settings));
        alert("âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©");
      }

      // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ù…Ø­ÙÙˆØ¸
      const savedTheme = localStorage.getItem("selectedTheme") || "light";
      document.getElementById("themeSelect").value = savedTheme;
      applyTheme();

      // Ø§Ù„Ø§ØªØµØ§Ù„
     // Ø§Ù„Ø§ØªØµØ§Ù„
      async function connect() {
        console.log("ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€:", WEMOS_IP);

        try {
          // âœ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ Ø§Ù„ØµØ­ÙŠØ­
          const protocol = window.location.protocol || 'https:';
          const response = await fetch(`${protocol}//${WEMOS_IP}/api/status`, {
            method: "GET",
            headers: {
              "Content-Type": "application/json",
            },
            // Ø¥Ø¶Ø§ÙØ© timeout
            signal: AbortSignal.timeout(5000), // 5 Ø«ÙˆØ§Ù†ÙŠ
          });

          if (!response.ok) {
            throw new Error(`HTTP ${response.status}`);
          }

          const data = await response.json();

          // âœ… Ù†Ø¬Ø­ Ø§Ù„Ø§ØªØµØ§Ù„
          console.log("âœ… ØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù†Ø¬Ø§Ø­!", data);
          isConnected = true;

          updateConnectionUI(true);
          updateUI(data);
          connectWebSocket();
          loadAll();
        } catch (error) {
          // âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„
          console.error("âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„:", error.message);
          isConnected = false;

          updateConnectionUI(false);

          // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†ÙŠ
          setTimeout(() => {
            console.log("ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©...");
            connect();
          }, 5000);
        }
      }

      // WebSocket
      // WebSocket
      function connectWebSocket() {
        if (ws) {
          ws.close();
        }

        console.log("ğŸ”Œ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ WebSocket...");

        try {
          // âœ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ (wss Ù„Ù„Ù€ https)
          const wsProtocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
          const wsUrl = USE_PROXY 
            ? `${wsProtocol}//${WEMOS_IP}/ws`  // Ø¹Ø¨Ø± Ø§Ù„ÙˆÙƒÙŠÙ„
            : `ws://${WEMOS_IP}:81`;           // Ø§ØªØµØ§Ù„ Ù…Ø¨Ø§Ø´Ø±
          
          console.log("ğŸ”— WebSocket URL:", wsUrl);
          ws = new WebSocket(wsUrl);
          // Ø¹Ù†Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„
          ws.onopen = () => {
            console.log("âœ… WebSocket Ù…ØªØµÙ„!");
            clearInterval(reconnectInterval);

            // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø§Ø®ØªØ¨Ø§Ø±
            ws.send(
              JSON.stringify({
                type: "ping",
                timestamp: Date.now(),
              })
            );
          };

          // Ø¹Ù†Ø¯ Ø§Ø³ØªÙ„Ø§Ù… Ø±Ø³Ø§Ù„Ø©
          ws.onmessage = (event) => {
            try {
              const data = JSON.parse(event.data);
              console.log("ğŸ“© Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©:", data);

              if (data.type === "sensors") {
                updateSensors(data);
              } else if (data.type === "log") {
                addLogEntry(data);
              } else if (data.type === "pong") {
                console.log("ğŸ“ Pong received");
              }
            } catch (e) {
              console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø©:", e);
            }
          };

          // Ø¹Ù†Ø¯ Ø­Ø¯ÙˆØ« Ø®Ø·Ø£
          ws.onerror = (error) => {
            console.error("âŒ WebSocket error:", error);
          };

          // Ø¹Ù†Ø¯ Ù‚Ø·Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„
          ws.onclose = (event) => {
            console.log("ğŸ”Œ WebSocket Ù…Ù‚Ø·ÙˆØ¹:", event.code, event.reason);

            // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
            reconnectInterval = setInterval(() => {
              if (isConnected) {
                console.log("ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ WebSocket...");
                connectWebSocket();
              }
            }, 5000);
          };
        } catch (error) {
          console.error("âŒ ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ WebSocket:", error);
        }
      }
      function updateConnectionUI(connected) {
        const badge = document.getElementById("connectionBadge");
        const ipDisplay = document.getElementById("ipDisplay");

        if (connected) {
          badge.textContent = "Ù…ØªØµÙ„ âœ“";
          badge.className = "badge badge-online";
          ipDisplay.textContent = `IP: ${WEMOS_IP}`;
          ipDisplay.style.opacity = "1";
        } else {
          badge.textContent = "ØºÙŠØ± Ù…ØªØµÙ„ âœ—";
          badge.className = "badge badge-offline";
          ipDisplay.textContent = "ØºÙŠØ± Ù…ØªØµÙ„";
          ipDisplay.style.opacity = "0.5";
        }
      }
      function updateSensors(data) {
        console.log("ğŸ“Š ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø³Ø§Ø³Ø§Øª:", data);

        // Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø©
        if (data.temperature !== undefined) {
          const tempEl = document.getElementById("temp");
          tempEl.textContent = data.temperature.toFixed(1) + "Â°C";
          tempEl.classList.remove("loading");

          // ØªÙ„ÙˆÙŠÙ† Ø­Ø³Ø¨ Ø§Ù„Ø­Ø±Ø§Ø±Ø©
          if (data.temperature > 30) {
            tempEl.style.color = "#ef4444"; // Ø£Ø­Ù…Ø±
          } else if (data.temperature < 18) {
            tempEl.style.color = "#3b82f6"; // Ø£Ø²Ø±Ù‚
          } else {
            tempEl.style.color = "var(--primary)";
          }
        }

        // Ø§Ù„Ø±Ø·ÙˆØ¨Ø©
        if (data.humidity !== undefined) {
          const humEl = document.getElementById("hum");
          humEl.textContent = data.humidity.toFixed(1) + "%";
          humEl.classList.remove("loading");
        }

        // Ø§Ù„Ø¥Ø¶Ø§Ø¡Ø©
        if (data.lightLevel !== undefined) {
          const lightEl = document.getElementById("light");
          lightEl.textContent = data.lightLevel;
          lightEl.classList.remove("loading");
        }

        // Ø§Ù„Ù…Ø·Ø±
        if (data.isRaining !== undefined) {
          const rainEl = document.getElementById("rain");
          rainEl.textContent = data.isRaining ? "ğŸŒ§ï¸ Ù†Ø¹Ù…" : "â˜€ï¸ Ù„Ø§";
          rainEl.classList.remove("loading");

          const rainAlert = document.getElementById("rainAlert");
          if (data.isRaining) {
            rainAlert.classList.add("show");
            // ØªØ´ØºÙŠÙ„ ØµÙˆØª ØªÙ†Ø¨ÙŠÙ‡ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
            playAlertSound();
          } else {
            rainAlert.classList.remove("show");
          }
        }

        // Ù…ÙˆØ§Ø¶Ø¹ Ø§Ù„Ù†Ø§ÙØ°Ø© ÙˆØ§Ù„Ø³ØªØ§Ø±Ø©
        if (data.windowPosition !== undefined) {
          updateWindowPreview(data.windowPosition);
        }
        if (data.blindPosition !== undefined) {
          updateBlindPreview(data.blindPosition);
        }
      }

      // ============================================
      // 5ï¸âƒ£ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø¨Ø´ÙƒÙ„ Ø¢Ù…Ù†
      // ============================================
      async function sendCommand(endpoint, data) {
        if (!isConnected) {
          console.warn("âš ï¸ ØºÙŠØ± Ù…ØªØµÙ„! Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø£Ù…Ø±");
          showNotification("ØºÙŠØ± Ù…ØªØµÙ„ Ø¨Ø§Ù„Ù†Ø¸Ø§Ù…", "warning");
          return false;
        }

       try {
          const protocol = window.location.protocol || 'https:';
          const response = await fetch(`${protocol}//${WEMOS_IP}${endpoint}`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(data),
            signal: AbortSignal.timeout(3000),
          });

          if (!response.ok) {
            throw new Error(`HTTP ${response.status}`);
          }

          const result = await response.json();
          console.log("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø£Ù…Ø±:", result);

          return true;
        } catch (error) {
          console.error("âŒ ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø£Ù…Ø±:", error);
          showNotification("ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø£Ù…Ø±", "danger");
          return false;
        }
      }

      // ============================================
      // 6ï¸âƒ£ ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø­Ø³Ù‘Ù†Ø©
      // ============================================
      async function setWindow(pos) {
        try {
          const protocol = window.location.protocol || 'https:';
          await fetch(`${protocol}//${WEMOS_IP}/api/window`, {
          position: parseInt(pos),
        });

        if (success) {
          showNotification(`ØªÙ… ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¥Ù„Ù‰ ${pos}%`, "success");
          updateWindowPreview(pos);
        }
      }

      async function setBlind(pos) {
        try {
          const protocol = window.location.protocol || 'https:';
          await fetch(`${protocol}//${WEMOS_IP}/api/blind`, {
          position: parseInt(pos),
        });

        if (success) {
          showNotification(`ØªÙ… ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ø³ØªØ§Ø±Ø© Ø¥Ù„Ù‰ ${pos}%`, "success");
          updateBlindPreview(pos);
        }
      }

      async function toggleAutoMode() {
        const autoMode = document.getElementById("autoModeSwitch").checked;
        console.log(`ğŸ¤– Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ: ${autoMode ? "Ù…ÙØ¹Ù‘Ù„" : "Ù…Ø¹Ø·Ù‘Ù„"}`);

        const success = await sendCommand("/api/auto", {
          autoMode: autoMode,
        });

        if (success) {
          showNotification(
            autoMode ? "ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ" : "ØªÙ… ØªØ¹Ø·ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ",
            "success"
          );
        }
      }

      // ============================================
      // 7ï¸âƒ£ Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
      // ============================================
      function showNotification(message, type = "info") {
        const notification = document.createElement("div");
        notification.className = `notification notification-${type}`;
        notification.textContent = message;
        notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 15px 25px;
        background: ${
          type === "success"
            ? "#10b981"
            : type === "danger"
            ? "#ef4444"
            : "#667eea"
        };
        color: white;
        border-radius: 10px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        z-index: 9999;
        animation: slideIn 0.3s;
    `;

        document.body.appendChild(notification);

        setTimeout(() => {
          notification.style.animation = "slideOut 0.3s";
          setTimeout(() => notification.remove(), 300);
        }, 3000);
      }

      // ============================================
      // 8ï¸âƒ£ ØµÙˆØª Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
      // ============================================
      function playAlertSound() {
        const audio = new Audio(
          "data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBjGH0fPTgjMGHm7A7+OZTR"
        );
        audio.volume = 0.3;
        audio.play().catch((e) => console.log("Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª"));
      }

      // ============================================
      // 9ï¸âƒ£ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ ÙŠØ¯ÙˆÙŠØ§Ù‹
      // ============================================
      function testConnection() {
        console.log("ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„...");

        // Ø§Ø®ØªØ¨Ø§Ø± HTTP
        fetch(`http://${WEMOS_IP}/api/status`)
          .then((r) => r.json())
          .then((data) => {
            console.log("âœ… HTTP ÙŠØ¹Ù…Ù„:", data);
            alert("âœ… Ø§Ù„Ø§ØªØµØ§Ù„ ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­!");
          })
          .catch((e) => {
            console.error("âŒ HTTP Ù„Ø§ ÙŠØ¹Ù…Ù„:", e);
            alert(
              "âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„!\n\nØªØ£ÙƒØ¯ Ù…Ù†:\n1. Ø¹Ù†ÙˆØ§Ù† IP ØµØ­ÙŠØ­\n2. WeMos Ù…Ø´ØºÙ‘Ù„\n3. Ù†ÙØ³ Ø´Ø¨ÙƒØ© WiFi"
            );
          });
      }

      // ============================================
      // ğŸš€ Ø§Ù„Ø¨Ø¯Ø¡ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
      // ============================================
      document.addEventListener("DOMContentLoaded", () => {
        console.log("ğŸš€ Ø¨Ø¯Ø¡ Ø§Ù„Ù†Ø¸Ø§Ù…...");
        connect();

        // Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ ÙÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        const settingsCard = document.querySelector("#settings .card");
        if (settingsCard) {
          const testBtn = document.createElement("button");
          testBtn.className = "btn btn-secondary";
          testBtn.textContent = "ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„";
          testBtn.onclick = testConnection;
          settingsCard.appendChild(testBtn);
        }
      });

      // ============================================
      // ğŸ“Š Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ´Ø®ÙŠØµ
      // ============================================
      function showDiagnostics() {
        console.log("ğŸ“Š Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ´Ø®ÙŠØµ:");
        console.log("IP:", WEMOS_IP);
        console.log("HTTP Ù…ØªØµÙ„:", isConnected);
        console.log("WebSocket:", ws ? ws.readyState : "ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");
        console.log("WebSocket States:", {
          CONNECTING: 0,
          OPEN: 1,
          CLOSING: 2,
          CLOSED: 3,
          current: ws ? ws.readyState : "N/A",
        });
      }

      // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„ØªØ´Ø®ÙŠØµ ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ©
      setInterval(showDiagnostics, 30000);

      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
      function updateSensors(data) {
        document.getElementById("temp").textContent =
          data.temperature.toFixed(1) + "Â°C";
        document.getElementById("hum").textContent =
          data.humidity.toFixed(1) + "%";
        document.getElementById("light").textContent = data.lightLevel;
        document.getElementById("rain").textContent = data.isRaining
          ? "ğŸŒ§ï¸ Ù†Ø¹Ù…"
          : "â˜€ï¸ Ù„Ø§";

        document
          .querySelectorAll(".sensor-value")
          .forEach((el) => el.classList.remove("loading"));

        if (data.isRaining) {
          document.getElementById("rainAlert").classList.add("show");
        } else {
          document.getElementById("rainAlert").classList.remove("show");
        }

        updateWindowPreview(data.windowPosition);
        updateBlindPreview(data.blindPosition);
      }

      function updateUI(data) {
        document.getElementById("modeBadge").textContent = data.autoMode
          ? "ğŸ¤– ØªÙ„Ù‚Ø§Ø¦ÙŠ"
          : "âœ‹ ÙŠØ¯ÙˆÙŠ";
        document.getElementById("modeBadge").className = data.autoMode
          ? "badge badge-auto"
          : "badge badge-manual";

        document.getElementById("autoModeSwitch").checked = data.autoMode;
        document.getElementById("windowSlider").value = data.windowPosition;
        document.getElementById("blindSlider").value = data.blindPosition;
      }

      function updateWindowPreview(value) {
        document.getElementById("windowSliderLabel").textContent = value + "%";
        document.getElementById("windowPosDisplay").textContent = value;
        document.getElementById("windowFrame").style.height = value + "%";
        document.getElementById("windowFrame2").style.height = value + "%";
      }

      function updateBlindPreview(value) {
        document.getElementById("blindSliderLabel").textContent = value + "%";
        document.getElementById("blindPosDisplay").textContent = value;
        const height = 100 - value + "%";
        document.getElementById("blindOverlay").style.height = height;
        document.getElementById("blindOverlay2").style.height = height;
      }

      // Ø§Ù„ØªØ­ÙƒÙ…
      async function setWindow(pos) {
        try {
          const protocol = window.location.protocol || 'https:';
          await fetch(`${protocol}//${WEMOS_IP}/api/window`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ position: parseInt(pos) }),
          });
        } catch (e) {
          console.error(e);
        }
      }

     async function setBlind(pos) {
        try {
          const protocol = window.location.protocol || 'https:';
          await fetch(`${protocol}//${WEMOS_IP}/api/blind`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ position: parseInt(pos) }),
          });
        } catch (e) {
          console.error(e);
        }
      }

     async function toggleAutoMode() {
        const autoMode = document.getElementById("autoModeSwitch").checked;
        try {
          const protocol = window.location.protocol || 'https:';
          await fetch(`${protocol}//${WEMOS_IP}/api/auto`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ autoMode }),
          });
        } catch (e) {
          console.error(e);
        }
      }

      async function toggleAutoWindow() {
        const autoWindow = document.getElementById("autoWindowSwitch").checked;
        try {
          const protocol = window.location.protocol || 'https:';
          await fetch(`${protocol}//${WEMOS_IP}/api/auto`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ autoWindow }),
          });
        } catch (e) {
          console.error(e);
        }
      }

      async function toggleAutoBlinds() {
        const autoBlinds = document.getElementById("autoBlindsSwitch").checked;
        try {
          const protocol = window.location.protocol || 'https:';
          await fetch(`${protocol}//${WEMOS_IP}/api/auto`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ autoBlinds }),
          });
        } catch (e) {
          console.error(e);
        }
      }

      // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
      async function loadAll() {
        loadScenes();
        loadSchedules();
        loadLogs();
        loadStats();
        loadHistory();
        loadSettings();
      }

      async function loadScenes() {
        try {
          const protocol = window.location.protocol || 'https:';
          const res = await fetch(`${protocol}//${WEMOS_IP}/api/scenes`);
          const data = await res.json();
          const container = document.getElementById("scenesContainer");
          container.innerHTML = "";

          data.scenes.forEach((scene, i) => {
            if (scene.enabled) {
              container.innerHTML += `
                            <div class="scene-btn" onclick="activateScene(${i})">
                                <div class="scene-icon">${
                                  ["ğŸŒ…", "â˜€ï¸", "ğŸŒ†", "ğŸŒ™", "ğŸ’¨"][i]
                                }</div>
                                <div>${scene.name}</div>
                            </div>
                        `;
            }
          });
        } catch (e) {
          console.error(e);
        }
      }

      async function activateScene(index) {
        try {
          const protocol = window.location.protocol || 'https:';
          await fetch(`${protocol}//${WEMOS_IP}/api/scenes`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ index }),
          });
        } catch (e) {
          console.error(e);
        }
      }

      async function loadSchedules() {
        try {
          const protocol = window.location.protocol || 'https:';
          const res = await fetch(`${protocol}//${WEMOS_IP}/api/schedules`);
          const data = await res.json();
          const container = document.getElementById("schedulesContainer");
          container.innerHTML = "";

          data.schedules.forEach((sch, i) => {
            container.innerHTML += `
                        <div class="schedule-item">
                            <input type="checkbox" ${
                              sch.enabled ? "checked" : ""
                            } 
                                   onchange="schedules[${i}].enabled=this.checked">
                            <div>Ø¬Ø¯ÙˆÙ„Ø© ${i + 1}</div>
                            <input type="number" class="schedule-input" value="${
                              sch.hour
                            }" 
                                   min="0" max="23" placeholder="Ø³Ø§Ø¹Ø©"
                                   onchange="schedules[${i}].hour=parseInt(this.value)">
                            <input type="number" class="schedule-input" value="${
                              sch.minute
                            }" 
                                   min="0" max="59" placeholder="Ø¯Ù‚ÙŠÙ‚Ø©"
                                   onchange="schedules[${i}].minute=parseInt(this.value)">
                            <input type="number" class="schedule-input" value="${
                              sch.windowPos
                            }" 
                                   min="0" max="100" placeholder="Ù†Ø§ÙØ°Ø©%"
                                   onchange="schedules[${i}].windowPos=parseInt(this.value)">
                            <input type="number" class="schedule-input" value="${
                              sch.blindPos
                            }" 
                                   min="0" max="100" placeholder="Ø³ØªØ§Ø±Ø©%"
                                   onchange="schedules[${i}].blindPos=parseInt(this.value)">
                        </div>
                    `;
          });

          window.schedules = data.schedules;
        } catch (e) {
          console.error(e);
        }
      }

      async function saveSchedules() {
        try {
          const protocol = window.location.protocol || 'https:';
          await fetch(`${protocol}//${WEMOS_IP}/api/schedules`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ schedules: window.schedules }),
          });
          alert("âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø©");
        } catch (e) {
          alert("âœ— ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸");
        }
      }

     async function loadLogs() {
        try {
          const protocol = window.location.protocol || 'https:';
          const res = await fetch(`${protocol}//${WEMOS_IP}/api/logs`);
          const data = await res.json();
          const container = document.getElementById("logsContainer");
          container.innerHTML = "";

          data.logs.reverse().forEach((log) => {
            const time = new Date(log.timestamp * 1000).toLocaleTimeString(
              "ar"
            );
            container.innerHTML += `
                        <div class="log-entry ${log.level.toLowerCase()}">
                            <strong>[${time}]</strong> ${log.event}
                        </div>
                    `;
          });
        } catch (e) {
          console.error(e);
        }
      }

      function addLogEntry(data) {
        const container = document.getElementById("logsContainer");
        const time = new Date(data.timestamp * 1000).toLocaleTimeString("ar");
        const entry = document.createElement("div");
        entry.className = `log-entry ${data.level.toLowerCase()}`;
        entry.innerHTML = `<strong>[${time}]</strong> ${data.event}`;
        container.insertBefore(entry, container.firstChild);

        if (container.children.length > 50) {
          container.removeChild(container.lastChild);
        }
      }

      async function loadStats() {
        try {
          const protocol = window.location.protocol || 'https:';
          const res = await fetch(`${protocol}//${WEMOS_IP}/api/stats`);
          const data = await res.json();

          const hours = Math.floor(data.uptime / 3600);
          const mins = Math.floor((data.uptime % 3600) / 60);
          document.getElementById("uptime").textContent = `${hours}Ø³ ${mins}Ø¯`;
          document.getElementById("windowMoves").textContent =
            data.windowMovements;
          document.getElementById("blindMoves").textContent =
            data.blindMovements;
          document.getElementById("rainCount").textContent =
            data.rainDetections;
        } catch (e) {
          console.error(e);
        }
      }

      async function loadHistory() {
        try {
          const protocol = window.location.protocol || 'https:';
          const res = await fetch(`${protocol}//${WEMOS_IP}/api/history`);
          const data = await res.json();

          createChart("tempChart", "Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø©", data.temperature, "Â°C");
          createChart("humChart", "Ø§Ù„Ø±Ø·ÙˆØ¨Ø©", data.humidity, "%");
          createChart("lightChart", "Ø§Ù„Ø¥Ø¶Ø§Ø¡Ø©", data.light, "");
        } catch (e) {
          console.error(e);
        }
      }

      function createChart(id, label, data, unit) {
        const ctx = document.getElementById(id);
        if (charts[id]) charts[id].destroy();

        charts[id] = new Chart(ctx, {
          type: "line",
          data: {
            labels: Array.from({ length: 24 }, (_, i) => `${i}:00`),
            datasets: [
              {
                label: label,
                data: data,
                borderColor: "#667eea",
                backgroundColor: "rgba(102, 126, 234, 0.1)",
                tension: 0.4,
                fill: true,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: { display: false },
            },
            scales: {
              y: {
                beginAtZero: false,
                ticks: {
                  callback: (value) => value + unit,
                },
              },
            },
          },
        });
      }

      async function loadSettings() {
        try {
          const protocol = window.location.protocol || 'https:';
          const res = await fetch(`${protocol}//${WEMOS_IP}/api/settings`);
          const data = await res.json();

          document.getElementById("lightThreshold").value = data.lightThreshold;
          document.getElementById("tempThreshold").value = data.tempThreshold;
          document.getElementById("windowCal").value = data.windowCalibration;
          document.getElementById("blindCal").value = data.blindCalibration;
          document.getElementById("autoWindowSwitch").checked = data.autoWindow;
          document.getElementById("autoBlindsSwitch").checked = data.autoBlinds;
        } catch (e) {
          console.error(e);
        }
      }

      async function saveSettings() {
        try {
          const settings = {
            lightThreshold: parseInt(
              document.getElementById("lightThreshold").value
            ),
            tempThreshold: parseInt(
              document.getElementById("tempThreshold").value
            ),
          };

          const protocol = window.location.protocol || 'https:';
          await fetch(`${protocol}//${WEMOS_IP}/api/settings`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(settings),
          });
          alert("âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª");
        } catch (e) {
          alert("âœ— ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸");
        }
      }

      async function calibrate() {
        try {
          const cal = {
            windowCalibration: parseInt(
              document.getElementById("windowCal").value
            ),
            blindCalibration: parseInt(
              document.getElementById("blindCal").value
            ),
          };

          const protocol = window.location.protocol || 'https:';
          await fetch(`${protocol}//${WEMOS_IP}/api/calibrate`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(cal),
          });
          alert("âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø©");
        } catch (e) {
          alert("âœ— ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸");
        }
      }

      function saveIP() {
        WEMOS_IP = document.getElementById("wemosIP").value;
        localStorage.setItem("wemosIP", WEMOS_IP);
        alert("âœ… ØªÙ… Ø­ÙØ¸ Ø¹Ù†ÙˆØ§Ù† IP");
        location.reload();
      }

      // Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
      function switchTab(tabName) {
        // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªÙØ¹ÙŠÙ„ Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª ÙˆØ§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª
        document
          .querySelectorAll(".tab")
          .forEach((t) => t.classList.remove("active"));
        document
          .querySelectorAll(".tab-content")
          .forEach((t) => t.classList.remove("active"));

        // ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
        const tabs = document.querySelectorAll(".tab");
        tabs.forEach((tab) => {
          if (tab.getAttribute("onclick").includes(tabName)) {
            tab.classList.add("active");
          }
        });

        // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
        const content = document.getElementById(tabName);
        if (content) {
          content.classList.add("active");
        }
      }

      // Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ
      function toggleTheme() {
        const body = document.body;
        const theme = body.getAttribute("data-theme");
        const newTheme = theme === "light" ? "dark" : "light";
        body.setAttribute("data-theme", newTheme);
        localStorage.setItem("theme", newTheme);

        document.querySelector(".theme-toggle").textContent =
          newTheme === "light" ? "ğŸŒ™" : "â˜€ï¸";
      }

      // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ù…Ø­ÙÙˆØ¸
      const savedThemeMode = localStorage.getItem("theme") || "light";
      document.body.setAttribute("data-theme", savedThemeMode);
      document.querySelector(".theme-toggle").textContent =
        savedThemeMode === "light" ? "ğŸŒ™" : "â˜€ï¸";

      // ØªØ­Ø¯ÙŠØ« Ø¯ÙˆØ±ÙŠ
      setInterval(() => {
        if (
          document
            .getElementById("connectionBadge")
            .classList.contains("badge-online")
        ) {
          loadStats();
        }
      }, 5000);

      // Ø§Ù„Ø¨Ø¯Ø¡
      connect();
    </script>
  </body>
</html>
